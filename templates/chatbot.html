{% extends "base.html" %}

{% block title %}Chatbot Thời Khóa Biểu{% endblock %}

{% block content %}
<aside class="sidebar">
    <div class="sidebar-header">
        <button class="new-chat-btn" id="new-chat-btn">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
            <span>Trò chuyện mới</span>
        </button>
    </div>
    <div class="history-container">
        <p class="history-title">Lịch sử</p>
        <ul class="history-list" id="history-list">
            <!-- Lịch sử sẽ được tải vào đây -->
        </ul>
    </div>
    <div class="sidebar-footer">
        <div class="user-profile">
            <div class="user-avatar">{{ user.name[0] }}</div>
            <div class="user-details">
                <span class="user-name">{{ user.name }}</span>
                <span class="user-role">{{ user.role }}</span>
            </div>
        </div>
        <a href="/logout" class="logout-btn" title="Đăng xuất">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path><polyline points="16 17 21 12 16 7"></polyline><line x1="21" y1="12" x2="9" y2="12"></line></svg>
        </a>
    </div>
</aside>
<main class="chat-area">
    <div class="chat-content">
        <div class="chat-box" id="chat-box">
            <div class="welcome-message">
                <svg class="gemini-icon-large" width="48" height="48" viewBox="0 0 24 24"><path fill="#4285F4" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/><path fill="#34A853" d="M12 4c-2.9 0-5.43 1.56-6.83 3.89L7.1 9.82C7.95 7.93 9.84 6.5 12 6.5s4.05 1.43 4.9 3.32l1.93-1.93C17.43 5.56 14.9 4 12 4z"/><path fill="#FBBC05" d="M4.17 7.89C2.82 9.24 2 10.99 2 12.91h10.5c-.17-2.61-2.24-4.68-4.85-4.85L4.17 7.89z"/><path fill="#EA4335" d="M12 17.5c-2.9 0-5.43-1.56-6.83-3.89l-1.93 1.93C4.57 18.44 7.1 20 10 20c2.61 0 4.96-1.32 6.42-3.34l-2.05-2.05C13.53 16.18 12.18 17.5 10 17.5z"/></svg>
                <h1>Xin chào, {{ user.name }}</h1>
                <p>Tôi có thể giúp gì cho bạn hôm nay?</p>
            </div>
        </div>
    </div>
    <div class="chat-input-area">
        <form class="chat-form" id="chat-form">
            <textarea id="user-input" placeholder="Nhập câu hỏi của bạn ở đây..." rows="1"></textarea>
            <button type="submit" id="send-btn" title="Gửi">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="22" y1="2" x2="11" y2="13"></line><polygon points="22 2 15 22 11 13 2 9 22 2"></polygon></svg>
            </button>
        </form>
        <p class="disclaimer">Chatbot có thể mắc lỗi. Hãy kiểm tra lại các thông tin quan trọng.</p>
    </div>
</main>
{% endblock %}

{% block scripts %}
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="{{ url_for('static', path='/js/main.js') }}"></script>
{% endblock %}
